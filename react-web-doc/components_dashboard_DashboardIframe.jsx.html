

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> components/dashboard/DashboardIframe.jsx</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="ApiService.html">ApiService</a></li></ul><h3>Global</h3><ul><li><a href="global.html#API_ENDPOINTS">API_ENDPOINTS</a></li><li><a href="global.html#ApproverHierarchyForm">ApproverHierarchyForm</a></li><li><a href="global.html#BackButton">BackButton</a></li><li><a href="global.html#BlockForm">BlockForm</a></li><li><a href="global.html#Checkbox">Checkbox</a></li><li><a href="global.html#DashboardContent">DashboardContent</a></li><li><a href="global.html#DashboardIframe">DashboardIframe</a></li><li><a href="global.html#FlutterAwareWrapper">FlutterAwareWrapper</a></li><li><a href="global.html#FlutterContext">FlutterContext</a></li><li><a href="global.html#FlutterProvider">FlutterProvider</a></li><li><a href="global.html#FormField">FormField</a></li><li><a href="global.html#MemoDetail">MemoDetail</a></li><li><a href="global.html#MemoEditForm">MemoEditForm</a></li><li><a href="global.html#MemoExplorer">MemoExplorer</a></li><li><a href="global.html#MemoForm">MemoForm</a></li><li><a href="global.html#MemoTabbedList">MemoTabbedList</a></li><li><a href="global.html#MemosPage">MemosPage</a></li><li><a href="global.html#Modal">Modal</a></li><li><a href="global.html#RoleForm">RoleForm</a></li><li><a href="global.html#SetPassword">SetPassword</a></li><li><a href="global.html#Setting">Setting</a></li><li><a href="global.html#ShiftForm">ShiftForm</a></li><li><a href="global.html#USER_ROLES">USER_ROLES</a></li><li><a href="global.html#UserForm">UserForm</a></li><li><a href="global.html#WardSelectDialog">WardSelectDialog</a></li><li><a href="global.html#WorkerStatus">WorkerStatus</a></li><li><a href="global.html#emptyLevel">emptyLevel</a></li><li><a href="global.html#errors">errors</a></li><li><a href="global.html#fieldMap">fieldMap</a></li><li><a href="global.html#getOrGenerateFcmToken">getOrGenerateFcmToken</a></li><li><a href="global.html#handleBlur">handleBlur</a></li><li><a href="global.html#handleChange">handleChange</a></li><li><a href="global.html#isOpen">isOpen</a></li><li><a href="global.html#method">method</a></li><li><a href="global.html#onClose">onClose</a></li><li><a href="global.html#onConfirm">onConfirm</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#touched">touched</a></li><li><a href="global.html#useAuth">useAuth</a></li><li><a href="global.html#useFlutter">useFlutter</a></li><li><a href="global.html#useForm">useForm</a></li><li><a href="global.html#validate">validate</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>components/dashboard/DashboardIframe.jsx</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { BarChart3, Calendar, Clock, RefreshCw, ChevronDown, Download, FileSpreadsheet } from 'lucide-react';
import { useEffect, useState } from 'react';
import ApiService from '../../services/api';
import { useAuth } from '../../contexts/AuthContext';
import toast from 'react-hot-toast';


/**
 * Renders the dashboard and associated memo table for a specific hospital.
 * It allows users to view dashboard statistics based on selected periods (today, week, month)
 * and date, and also displays a table of memos for the chosen period.
 * Users can filter and search memos and export them to Excel.
 *
 * @param {object} props - The component props.
 * @param {string} [props.baseUrl="https://app.memotrack.net/media/dashboard/"] - The base URL for the dashboard JSON files.
 * @param {string} [props.iframeHtmlUrl="/dashboard.html"] - The URL of the HTML file that loads the dashboard visualization.
 * @param {string} [props.apiBaseUrl='https://app.memotrack.net' ||'http://localhost:8000'] - The base URL for the API.
 * */
const DashboardIframe = ({
  baseUrl = "https://app.memotrack.net/media/dashboard/",
  iframeHtmlUrl = "/dashboard.html",
  apiBaseUrl = 'https://app.memotrack.net' ||'http://localhost:8000'
}) => {
  const {hospital,apiService} = useAuth();
  const hospitalId = hospital.id;
  const [selectedPeriod, setSelectedPeriod] = useState('month');
  const [selectedDate, setSelectedDate] = useState(new Date());
  const [showDatePicker, setShowDatePicker] = useState(false);
  const [jsonUrl, setJsonUrl] = useState('');
  const [iframeUrl, setIframeUrl] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [memos, setMemos] = useState([]);
  const [memosLoading, setMemosLoading] = useState(false);
  const [memosError, setMemosError] = useState(null);
  const [currentPage, setCurrentPage] = useState(1);
  const memosPerPage = 10;
  const [searchTerm, setSearchTerm] = useState("");
  const [filteredMemos, setFilteredMemos] = useState(memos);
  const [selectedResponder, setSelectedResponder] = useState('');
  const [selectedBlock, setSelectedBlock] = useState('');
  


  useEffect(() => {
  const lowerSearch = searchTerm.toLowerCase();

  const filtered = memos.filter((memo) => {
    const complaintMatch = memo.latest_snapshot.complaint
      .toLowerCase()
      .includes(lowerSearch);

    const responderMatch =
      selectedResponder === '' ||
      memo.latest_snapshot.tagged_role_name === selectedResponder;

    const blockMatch =
      selectedBlock === '' ||
      memo.latest_snapshot.current_block_name === selectedBlock;

    return complaintMatch &amp;&amp; responderMatch &amp;&amp; blockMatch;
  });

  setFilteredMemos(filtered);
}, [searchTerm, selectedResponder, selectedBlock, memos]);

  // Calculate the memos for the current page
  const paginatedMemos = filteredMemos.slice(
    (currentPage - 1) * memosPerPage,
    currentPage * memosPerPage
  );
  
  const totalPages = Math.ceil(memos.length / memosPerPage);
  // Function to format date based on period and selected date
  const formatDateForPeriod = (period, date) => {
    const targetDate = new Date(date);
    
    switch (period) {
      case 'today': {
        const year = targetDate.getFullYear();
        const month = String(targetDate.getMonth() + 1).padStart(2, '0');
        const day = String(targetDate.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      }
      case 'week': {
        const year = targetDate.getFullYear();
        const month = String(targetDate.getMonth() + 1).padStart(2, '0');
        
        // Calculate ISO week number
        const startOfYear = new Date(year, 0, 1);
        const pastDaysOfYear = (targetDate - startOfYear) / 86400000;
        const weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);
        const weekStr = String(weekNumber).padStart(2, '0');
        
        return `${year}-W${weekStr}`;
      }
      case 'month': {
        const year = targetDate.getFullYear();
        const month = String(targetDate.getMonth() + 1).padStart(2, '0');
        return `${year}-${month}`;
      }
      default:
        return '';
    }
  };

  // Function to format date for API call
  const formatDateForAPI = (period, date) => {
    const targetDate = new Date(date);
    
    switch (period) {
      case 'today':
        return {
          type: 'date',
          value: targetDate.toISOString().split('T')[0]
        };
      case 'week':
        const year = targetDate.getFullYear();
        const startOfYear = new Date(year, 0, 1);
        const pastDaysOfYear = (targetDate - startOfYear) / 86400000;
        const weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);
        return {
          type: 'week',
          year: year,
          week: weekNumber
        };
      case 'month':
        return {
          type: 'month',
          year: targetDate.getFullYear(),
          month: targetDate.getMonth() + 1
        };
      default:
        return {};
    }
  };

  // Generate the JSON URL and iframe URL based on hospital ID and selected period
  useEffect(() => {
    const dateString = formatDateForPeriod(selectedPeriod, selectedDate);
    const jsonDataUrl = `${baseUrl}${hospital.id}_${dateString}.json`;
    const fullIframeUrl = `${iframeHtmlUrl}?source=${encodeURIComponent(jsonDataUrl)}`;
    
    setJsonUrl(jsonDataUrl);
    setIframeUrl(fullIframeUrl);
  }, [hospitalId, selectedPeriod, selectedDate, baseUrl, iframeHtmlUrl]);

  // function to get query param
  function getQueryString(){
    try {
      const dateParams = formatDateForAPI(selectedPeriod, selectedDate);
      const queryParams = new URLSearchParams({
        hospital_id: hospital.id,
        period_type: dateParams.type,
        ...dateParams
      });
      return queryParams;
    }catch(err){
      toast.error("Failed to Download");
    }
  }

  // Function to fetch memos from backend
  const fetchMemos = async () => {
    setMemosLoading(true);
    setMemosError(null);
    
    try {
      const dateParams = formatDateForAPI(selectedPeriod, selectedDate);
      const queryParams = new URLSearchParams({
        hospital_id: hospital.id,
        period_type: dateParams.type,
        ...dateParams
      });

      const response = await apiService.getDashboardMemos(hospitalId,queryParams);
      console.log(response);
      if (response.count &lt;= 0 ) {
        throw new Error(`Failed to fetch memos (${response.status})`);
      }
      setMemos(response.memos);
    } catch (err) {
      setMemosError(err.message);
      setMemos([]);
    } finally {
      setMemosLoading(false);
    }
  };

  // Function to check if JSON URL is accessible for dashboard
  const loadDashboard = async () => {
    setLoading(true);
    setError(null);
    
    try {
      const response = await fetch(jsonUrl);
      if (!response.ok) {
        throw new Error(`Dashboard data not available (${response.status})`);
      }
      
      const data = await response.json();
      console.log('Dashboard data loaded:', data);
      
      // Simulate dashboard loading time
      setTimeout(() => {
        setLoading(false);
      }, 500);
      
    } catch (err) {
      setError(err.message);
      setLoading(false);
    }
  };

  // Auto-load when JSON URL changes
  useEffect(() => {
    if (jsonUrl) {
      loadDashboard();
      fetchMemos(); // Also fetch memos when date changes
    }
  }, [jsonUrl]);

  // Handle date input change
  const handleDateChange = (e) => {
    const newDate = new Date(e.target.value);
    setSelectedDate(newDate);
    setShowDatePicker(false);
  };

  // Handle week input change
  const handleWeekChange = (e) => {
    const [year, week] = e.target.value.split('-W');
    const newDate = new Date(year, 0, 1 + (week - 1) * 7);
    setSelectedDate(newDate);
    setShowDatePicker(false);
  };

  // Handle month input change
  const handleMonthChange = (e) => {
    const [year, month] = e.target.value.split('-');
    const newDate = new Date(year, month - 1, 1);
    setSelectedDate(newDate);
    setShowDatePicker(false);
  };

  // Get formatted date string for display
  const getDisplayDate = () => {
    const date = new Date(selectedDate);
    switch (selectedPeriod) {
      case 'today':
        return date.toLocaleDateString();
      case 'week':
        const year = date.getFullYear();
        const startOfYear = new Date(year, 0, 1);
        const pastDaysOfYear = (date - startOfYear) / 86400000;
        const weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);
        return `Week ${weekNumber}, ${year}`;
      case 'month':
        return date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
      default:
        return '';
    }
  };

  // Get the appropriate input type and value for the date picker
  const getDateInputProps = () => {
    const date = new Date(selectedDate);
    switch (selectedPeriod) {
      case 'today':
        return {
          type: 'date',
          value: date.toISOString().split('T')[0],
          onChange: handleDateChange
        };
      case 'week':
        const year = date.getFullYear();
        const startOfYear = new Date(year, 0, 1);
        const pastDaysOfYear = (date - startOfYear) / 86400000;
        const weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);
        return {
          type: 'week',
          value: `${year}-W${String(weekNumber).padStart(2, '0')}`,
          onChange: handleWeekChange
        };
      case 'month':
        return {
          type: 'month',
          value: `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`,
          onChange: handleMonthChange
        };
      default:
        return {};
    }
  };

  // Navigate to previous period
  const goToPrevious = () => {
    const newDate = new Date(selectedDate);
    switch (selectedPeriod) {
      case 'today':
        newDate.setDate(newDate.getDate() - 1);
        break;
      case 'week':
        newDate.setDate(newDate.getDate() - 7);
        break;
      case 'month':
        newDate.setMonth(newDate.getMonth() - 1);
        break;
    }
    setSelectedDate(newDate);
  };

  // Navigate to next period
  const goToNext = () => {
    const newDate = new Date(selectedDate);
    switch (selectedPeriod) {
      case 'today':
        newDate.setDate(newDate.getDate() + 1);
        break;
      case 'week':
        newDate.setDate(newDate.getDate() + 7);
        break;
      case 'month':
        newDate.setMonth(newDate.getMonth() + 1);
        break;
    }
    setSelectedDate(newDate);
  };

  // Reset to current date
  const goToCurrent = () => {
    setSelectedDate(new Date());
  };

  // Export single memo
  const exportMemo = (memoId) => {
    const exportUrl = `${apiBaseUrl}/api/export/memo/${memoId}`;
    window.open(exportUrl, '_blank');
  };

  // Export all memos
  const exportAllMemos = () => {
    const dateParams = formatDateForAPI(selectedPeriod, selectedDate);
    const queryParams = new URLSearchParams({
      hospital_id: hospitalId,
      period_type: dateParams.type,
      ...dateParams
    });
    const exportUrl = `${apiBaseUrl}/api/export/memos/${hospitalId}/?${queryParams}`;
    window.open(exportUrl, '_blank');
  };

  // Format date for display
  const formatDisplayDate = (dateString) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  // Get status badge color
  const getStatusBadge = (status, displayStatus) => {
    const effectiveStatus = displayStatus || status;
    const colors = {
      ongoing: 'bg-yellow-100 text-yellow-800',
      completed: 'bg-green-100 text-green-800',
      attended: 'bg-blue-100 text-blue-800',
      incomplete: 'bg-red-100 text-red-800'
    };
    return colors[effectiveStatus] || 'bg-gray-100 text-gray-800';
  };

  return (
    &lt;div className="w-full">
      &lt;h1 className='text-2xl font-bold p-3 mb-3'>Dashboard&lt;/h1>
      
      {/* Controls */}
      &lt;div className="mb-6 flex flex-wrap gap-4 items-center justify-between bg-white p-4 rounded-lg border">
        {/* Period Selection Buttons */}
        &lt;div className="flex gap-2">
          &lt;button
            onClick={() => setSelectedPeriod('today')}
            className={`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${
              selectedPeriod === 'today'
                ? 'bg-blue-600 text-white shadow-md'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            &lt;Clock size={16} />
            Today
          &lt;/button>
          &lt;button
            onClick={() => setSelectedPeriod('week')}
            className={`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${
              selectedPeriod === 'week'
                ? 'bg-blue-600 text-white shadow-md'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            &lt;Calendar size={16} />
            Week
          &lt;/button>
          &lt;button
            onClick={() => setSelectedPeriod('month')}
            className={`px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 ${
              selectedPeriod === 'month'
                ? 'bg-blue-600 text-white shadow-md'
                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
            }`}
          >
            &lt;BarChart3 size={16} />
            Month
          &lt;/button>
        &lt;/div>

        {/* Date Navigation and Selection */}
        &lt;div className="flex items-center gap-2">
          {/* Previous Button */}
          &lt;button
            onClick={goToPrevious}
            className="px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all"
          >
            ←
          &lt;/button>

          {/* Current Date Display and Picker */}
          &lt;div className="relative">
            &lt;button
              onClick={() => setShowDatePicker(!showDatePicker)}
              className="px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-all flex items-center gap-2 min-w-[200px] justify-between"
            >
              &lt;span>{getDisplayDate()}&lt;/span>
              &lt;ChevronDown size={16} className={`transition-transform ${showDatePicker ? 'rotate-180' : ''}`} />
            &lt;/button>
            
            {showDatePicker &amp;&amp; (
              &lt;div className="absolute top-full left-0 mt-2 bg-white border rounded-lg shadow-lg p-4 z-50 min-w-[200px]">
                &lt;input
                  {...getDateInputProps()}
                  className="w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                />
                &lt;div className="flex gap-2 mt-3">
                  &lt;button
                    onClick={goToCurrent}
                    className="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-all"
                  >
                    Today
                  &lt;/button>
                  &lt;button
                    onClick={() => setShowDatePicker(false)}
                    className="px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-all"
                  >
                    Close
                  &lt;/button>
                &lt;/div>
              &lt;/div>
            )}
          &lt;/div>

          {/* Next Button */}
          &lt;button
            onClick={goToNext}
            className="px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all"
          >
            →
          &lt;/button>
        &lt;/div>

        {/* Refresh Button */}
        &lt;button
          onClick={() => {
            loadDashboard();
            fetchMemos();
          }}
          disabled={loading || memosLoading}
          className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2"
        >
          &lt;RefreshCw size={16} className={(loading || memosLoading) ? 'animate-spin' : ''} />
          Refresh
        &lt;/button>
      &lt;/div>

      {/* Error Display */}
      {(error || memosError) &amp;&amp; (
        &lt;div className="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
          {error &amp;&amp; &lt;p className="text-red-700">Dashboard: {error}&lt;/p>}
          {memosError &amp;&amp; &lt;p className="text-red-700">Memos: {memosError}&lt;/p>}
        &lt;/div>
      )}

      {/* Loading State */}
      {(loading || memosLoading) &amp;&amp; (
        &lt;div className="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
          &lt;p className="text-blue-700 flex items-center gap-2">
            &lt;RefreshCw size={16} className="animate-spin" />
            Loading data...
          &lt;/p>
        &lt;/div>
      )}

      {/* Dashboard Iframe */}
      &lt;iframe
        src={iframeUrl}
        className="w-full border-none mb-6"
        title="Hospital Dashboard"
        key={iframeUrl}
        style={{minHeight: '100vh'}}
      />

      {/* Memos Table */}
      &lt;div className="p-4 border-b flex flex-col md:flex-row md:justify-between md:items-center gap-4">
  &lt;h2 className="text-xl font-semibold">Memos ({filteredMemos.length})&lt;/h2>

  &lt;div className="flex flex-col md:flex-row gap-2 w-full md:w-auto">
    {/* Search Field */}
    &lt;input
      type="text"
      placeholder="Search complaints..."
      value={searchTerm}
      onChange={(e) => setSearchTerm(e.target.value)}
      className="px-3 py-2 border rounded-md text-sm w-full md:w-64"
    />

    {/* Responder Dropdown */}
    &lt;select
      value={selectedResponder}
      onChange={(e) => setSelectedResponder(e.target.value)}
      className="px-3 py-2 border rounded-md text-sm w-full md:w-48"
    >
      &lt;option value="">All Responders&lt;/option>
      {Array.from(new Set(memos.map(m => m.latest_snapshot.tagged_role_name)))
        .filter(Boolean)
        .map((responder) => (
          &lt;option key={responder} value={responder}>
            {responder}
          &lt;/option>
      ))}
    &lt;/select>
    
{/* Block Dropdown */}
&lt;select
  value={selectedBlock}
  onChange={(e) => setSelectedBlock(e.target.value)}
  className="px-3 py-2 border rounded-md text-sm w-full md:w-48"
>
  &lt;option value="">All Blocks&lt;/option>
  {Array.from(new Set(memos.map(m => m.latest_snapshot.current_block_name))).map((block) => (
    &lt;option key={block} value={block}>{block}&lt;/option>
  ))}
&lt;/select>
  &lt;/div>

  {/* Export Button */}
  &lt;button
    onClick={exportAllMemos}
    disabled={filteredMemos.length === 0}
    className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center gap-2"
  >
    &lt;Download size={16} />
    Export All to Excel
  &lt;/button>
&lt;/div>




        
        {memos.length > 0 ? (
          &lt;div className="overflow-x-auto">
            &lt;table className="w-full">
              &lt;thead className="bg-gray-50">
                &lt;tr>
                  {/* &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Memo ID&lt;/th> */}
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Created&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Complaint&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Department&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Status&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Location&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Tagged Role&lt;/th>
                  &lt;th className="px-4 py-3 text-left text-sm font-medium text-gray-900">Actions&lt;/th>
                &lt;/tr>
              &lt;/thead>
              &lt;tbody className="divide-y divide-gray-200">
  {paginatedMemos.map((memo, index) => (
    &lt;tr key={memo.memoId} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
      {/* &lt;td className="px-4 py-3 text-sm text-gray-900 font-mono">
        {memo.memoId.slice(0, 8)}...
      &lt;/td> */}
      &lt;td className="px-4 py-3 text-sm text-gray-900">
        {formatDisplayDate(memo.created_at)}
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm text-gray-900 max-w-xs truncate" title={memo.latest_snapshot.complaint}>
        {memo.latest_snapshot.complaint}
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm text-gray-900">
        {memo.latest_snapshot.department}
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm">
        &lt;span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusBadge(memo.latest_snapshot.status, memo.latest_snapshot.display_status)}`}>
          {memo.latest_snapshot.display_status || memo.latest_snapshot.status}
        &lt;/span>
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm text-gray-900">
        &lt;div className="text-xs">
          &lt;div>{memo.latest_snapshot.current_block_name}&lt;/div>
          &lt;div className="text-gray-500">{memo.latest_snapshot.current_ward_name}&lt;/div>
        &lt;/div>
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm text-gray-900">
        {memo.latest_snapshot.tagged_role_name}
      &lt;/td>
      &lt;td className="px-4 py-3 text-sm">
        &lt;button
          onClick={() => exportMemo(memo.memoId)}
          className="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-all flex items-center gap-1 text-xs"
        >
          &lt;FileSpreadsheet size={12} />
          Export
        &lt;/button>
      &lt;/td>
    &lt;/tr>
  ))}
&lt;/tbody>

            &lt;/table>
          &lt;div className="flex justify-center items-center gap-2 my-4">
            &lt;button
              onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}
              disabled={currentPage === 1}
              className="px-3 py-1 text-sm bg-gray-200 rounded disabled:opacity-50"
            >
              Previous
            &lt;/button>
{Array.from({ length: totalPages }, (_, i) => i + 1)
  .filter((page) => {
    if (currentPage &lt;= 4) {
      return page &lt;= 7;
    }
    return (
      page >= Math.max(currentPage - 3, 1) &amp;&amp;
      page &lt;= Math.min(currentPage + 3, totalPages)
    );
  })
  .map((page) => (
    &lt;button
      key={page}
      onClick={() => setCurrentPage(page)}
      className={`px-3 py-1 text-sm rounded ${
        page === currentPage ? 'bg-blue-600 text-white' : 'bg-gray-100'
      }`}
    >
      {page}
    &lt;/button>
))}


            &lt;button
              onClick={() => setCurrentPage((prev) => Math.min(prev + 1, totalPages))}
              disabled={currentPage === totalPages}
              className="px-3 py-1 text-sm bg-gray-200 rounded disabled:opacity-50"
              >
              Next
            &lt;/button>
          &lt;/div>
        &lt;/div>

        ) : (
          &lt;div className="p-8 text-center text-gray-500">
            &lt;FileSpreadsheet size={48} className="mx-auto mb-4 text-gray-300" />
            &lt;p>No memos found for the selected period&lt;/p>
          &lt;/div>
        )}
      &lt;/div>
    
    
  );
};

export default DashboardIframe;</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>


</body>
</html>
